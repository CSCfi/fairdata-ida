{"version":3,"sources":["webpack:///./src/components/Admins.vue?7369","webpack:///src/components/Admins.vue","webpack:///./src/components/Admins.vue?f437","webpack:///./src/components/Admins.vue","webpack:///./node_modules/vue-click-outside/index.js"],"names":["component","_vm","this","_h","$createElement","_c","_self","staticClass","class","hidden","isLoading","_v","_l","admin","key","id","attrs","internal","displayname","_e","on","$event","deleteAdditionalAdmin","_s","$t","isAdding","stopPropagation","preventDefault","openNewAdmin","directives","name","rawName","value","expression","addAdditionalAdmin","domProps","target","composing","newAdditionalAdminInputField","validate","binding","console","warn","isServer","vNode","componentInstance","$isServer","module","exports","bind","el","handler","e","context","elements","path","composedPath","length","unshift","contains","popupItem","i","len","isPopup","__vueClickOutside__","callback","clickHandler","document","documentElement","addEventListener","update","unbind","removeEventListener"],"mappings":"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","file":"chunks/6-67bdb1018507b71d5d1a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"who-has-access\"},[_c('span',{staticClass:\"icon icon-loading\",class:{ hidden: !_vm.isLoading }}),_vm._v(\" \"),_vm._l((_vm.admins),function(admin){return _c('div',{key:admin.id,staticClass:\"admin-avatar-container\"},[_c('Avatar',{attrs:{\"user\":admin.internal ? admin.id : null,\"display-name\":admin.displayname,\"size\":64,\"is-no-user\":!admin.internal,\"show-user-status\":false}}),_vm._v(\" \"),(!admin.internal)?_c('Actions',[_c('ActionButton',{attrs:{\"icon\":\"icon-close\"},on:{\"click\":function($event){return _vm.deleteAdditionalAdmin(admin)}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.$t('privacy', 'Remove external admin'))+\"\\n\\t\\t\\t\")])],1):_vm._e()],1)}),_vm._v(\" \"),(_vm.$is_admin)?_c('div',[(!_vm.isAdding)?_c('Actions',{staticClass:\"addAdditionalAdmin\"},[_c('ActionButton',{attrs:{\"icon\":\"icon-add\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.openNewAdmin($event)}}},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(_vm.$t('privacy', 'Add external admin'))+\"\\n\\t\\t\\t\")])],1):_vm._e(),_vm._v(\" \"),(_vm.isAdding)?_c('form',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.closeNewAdmin),expression:\"closeNewAdmin\"}],staticClass:\"addAdditionalAdminFormContainer\",on:{\"submit\":function($event){$event.preventDefault();return _vm.addAdditionalAdmin($event)}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newAdditionalAdminInputField),expression:\"newAdditionalAdminInputField\"}],attrs:{\"type\":\"text\",\"maxlength\":\"64\",\"autocomplete\":\"new-password\",\"autocorrect\":\"off\",\"autocapitalize\":\"off\",\"spellcheck\":\"false\",\"placeholder\":_vm.$t('privacy', 'Name of external admin')},domProps:{\"value\":(_vm.newAdditionalAdminInputField)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newAdditionalAdminInputField=$event.target.value}}}),_vm._v(\" \"),_c('input',{staticClass:\"icon-confirm\",attrs:{\"type\":\"submit\",\"value\":\"\"}})]):_vm._e()],1):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright Copyright (c) 2019 Georg Ehrke <oc.list@georgehrke.com>\n  - @author Georg Ehrke <oc.list@georgehrke.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<div class=\"who-has-access\">\n\t\t<span :class=\"{ hidden: !isLoading }\" class=\"icon icon-loading\" />\n\t\t<div v-for=\"admin in admins\" :key=\"admin.id\" class=\"admin-avatar-container\">\n\t\t\t<Avatar :user=\"admin.internal ? admin.id : null\"\n\t\t\t\t:display-name=\"admin.displayname\"\n\t\t\t\t:size=\"64\"\n\t\t\t\t:is-no-user=\"!admin.internal\"\n\t\t\t\t:show-user-status=\"false\" />\n\t\t\t<Actions v-if=\"!admin.internal\">\n\t\t\t\t<ActionButton icon=\"icon-close\" @click=\"deleteAdditionalAdmin(admin)\">\n\t\t\t\t\t{{ $t('privacy', 'Remove external admin') }}\n\t\t\t\t</ActionButton>\n\t\t\t</Actions>\n\t\t</div>\n\n\t\t<div v-if=\"$is_admin\">\n\t\t\t<Actions v-if=\"!isAdding\" class=\"addAdditionalAdmin\">\n\t\t\t\t<ActionButton icon=\"icon-add\" @click.stop.prevent=\"openNewAdmin\">\n\t\t\t\t\t{{ $t('privacy', 'Add external admin') }}\n\t\t\t\t</ActionButton>\n\t\t\t</Actions>\n\t\t\t<form v-if=\"isAdding\"\n\t\t\t\tv-click-outside=\"closeNewAdmin\"\n\t\t\t\tclass=\"addAdditionalAdminFormContainer\"\n\t\t\t\t@submit.prevent=\"addAdditionalAdmin\">\n\t\t\t\t<input v-model=\"newAdditionalAdminInputField\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tmaxlength=\"64\"\n\t\t\t\t\tautocomplete=\"new-password\"\n\t\t\t\t\tautocorrect=\"off\"\n\t\t\t\t\tautocapitalize=\"off\"\n\t\t\t\t\tspellcheck=\"false\"\n\t\t\t\t\t:placeholder=\"$t('privacy', 'Name of external admin')\">\n\t\t\t\t<input type=\"submit\" value=\"\" class=\"icon-confirm\">\n\t\t\t\t<!-- add icon-loading -->\n\t\t\t</form>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport ClickOutside from 'vue-click-outside'\nimport HttpClient from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\nimport { showError } from '@nextcloud/dialogs'\nimport Actions from '@nextcloud/vue/dist/Components/Actions'\nimport ActionButton from '@nextcloud/vue/dist/Components/ActionButton'\nimport Avatar from '@nextcloud/vue/dist/Components/Avatar'\n\nexport default {\n\tname: 'Admins',\n\tcomponents: {\n\t\tActions,\n\t\tActionButton,\n\t\tAvatar,\n\t},\n\tdirectives: {\n\t\tClickOutside,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tadmins: [],\n\t\t\tnewAdditionalAdminInputField: '',\n\t\t\tisLoading: true,\n\t\t\tisAdding: false,\n\t\t\tisSavingChanges: false,\n\t\t}\n\t},\n\t/**\n\t * This function is called on mount of the Vue component\n\t * It sets the isAdmin property and\n\t * loads additional admins from the server\n\t */\n\tasync mounted() {\n\t\tconst url = generateUrl('/apps/privacy/api/admins')\n\t\ttry {\n\t\t\tconst resp = await HttpClient.get(url)\n\t\t\tVue.set(this, 'admins', resp.data)\n\t\t} catch (error) {\n\t\t\tconsole.error(error)\n\t\t\tshowError('Error loading additional administrator.')\n\t\t} finally {\n\t\t\tthis.isLoading = false\n\t\t}\n\t},\n\tmethods: {\n\t\t/**\n\t\t * Opens the new Admin dialog\n\t\t */\n\t\topenNewAdmin() {\n\t\t\tthis.isAdding = true\n\t\t},\n\t\t/**\n\t\t * Closes the new Admin dialog and resets the input field\n\t\t */\n\t\tcloseNewAdmin() {\n\t\t\tthis.isAdding = false\n\t\t\tthis.newAdditionalAdminInputField = ''\n\t\t},\n\t\t/**\n\t\t * Creates an additional (virtual) admin on the server\n\t\t *\n\t\t * @returns {Promise<void>}\n\t\t */\n\t\tasync addAdditionalAdmin() {\n\t\t\tconst url = generateUrl('/apps/privacy/api/admins')\n\t\t\tthis.isSavingChanges = true\n\n\t\t\ttry {\n\t\t\t\tconst response = await HttpClient.post(url, { name: this.newAdditionalAdminInputField })\n\t\t\t\tthis.admins.push(response.data)\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error)\n\t\t\t\tshowError('Error adding new administrator.')\n\t\t\t} finally {\n\t\t\t\tthis.isSavingChanges = false\n\t\t\t\tthis.isAdding = false\n\t\t\t\tthis.newAdditionalAdminInputField = ''\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Deletes an additional (virtual) admin from the server\n\t\t *\n\t\t * @param {Object} admin The admin object from this.admins\n\t\t * @returns {Promise<void>}\n\t\t */\n\t\tasync deleteAdditionalAdmin(admin) {\n\t\t\tconst url = generateUrl('/apps/privacy/api/admins/{id}', { id: admin.id })\n\n\t\t\ttry {\n\t\t\t\tawait HttpClient.delete(url)\n\n\t\t\t\tconst index = this.admins.indexOf(admin)\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tthis.admins.splice(index, 1)\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error)\n\t\t\t\tshowError('Error deleting new administrator.')\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Admins.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Admins.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Admins.vue?vue&type=template&id=218f35e5&\"\nimport script from \"./Admins.vue?vue&type=script&lang=js&\"\nexport * from \"./Admins.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","function validate(binding) {\n  if (typeof binding.value !== 'function') {\n    console.warn('[Vue-click-outside:] provided expression', binding.expression, 'is not a function.')\n    return false\n  }\n\n  return true\n}\n\nfunction isPopup(popupItem, elements) {\n  if (!popupItem || !elements)\n    return false\n\n  for (var i = 0, len = elements.length; i < len; i++) {\n    try {\n      if (popupItem.contains(elements[i])) {\n        return true\n      }\n      if (elements[i].contains(popupItem)) {\n        return false\n      }\n    } catch(e) {\n      return false\n    }\n  }\n\n  return false\n}\n\nfunction isServer(vNode) {\n  return typeof vNode.componentInstance !== 'undefined' && vNode.componentInstance.$isServer\n}\n\nexports = module.exports = {\n  bind: function (el, binding, vNode) {\n    if (!validate(binding)) return\n\n    // Define Handler and cache it on the element\n    function handler(e) {\n      if (!vNode.context) return\n\n      // some components may have related popup item, on which we shall prevent the click outside event handler.\n      var elements = e.path || (e.composedPath && e.composedPath())\n      elements && elements.length > 0 && elements.unshift(e.target)\n\n      if (el.contains(e.target) || isPopup(vNode.context.popupItem, elements)) return\n\n      el.__vueClickOutside__.callback(e)\n    }\n\n    // add Event Listeners\n    el.__vueClickOutside__ = {\n      handler: handler,\n      callback: binding.value\n    }\n    const clickHandler = 'ontouchstart' in document.documentElement ? 'touchstart' : 'click';\n    !isServer(vNode) && document.addEventListener(clickHandler, handler)\n  },\n\n  update: function (el, binding) {\n    if (validate(binding)) el.__vueClickOutside__.callback = binding.value\n  },\n\n  unbind: function (el, binding, vNode) {\n    // Remove Event Listeners\n    const clickHandler = 'ontouchstart' in document.documentElement ? 'touchstart' : 'click';\n    !isServer(vNode) && el.__vueClickOutside__ && document.removeEventListener(clickHandler, el.__vueClickOutside__.handler)\n    delete el.__vueClickOutside__\n  }\n}\n"],"sourceRoot":""}