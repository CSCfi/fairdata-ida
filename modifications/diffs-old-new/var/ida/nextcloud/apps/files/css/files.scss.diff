--- /var/ida/nextcloud-new/apps/files/css/files.scss	2021-10-27 15:54:06.621751746 +0000
+++ /var/ida/nextcloud-old/apps/files/css/files.scss	2021-10-27 10:25:30.393495080 +0000
@@ -1,11 +1,19 @@
-/**
- * Copyright (c) 2011, Jan-Christoph Borchardt, http://jancborchardt.net
- * @copyright Copyright (c) 2019, Fabian Dreßler <nudelsalat@clouz.de>
+/*
+ * This file is part of the IDA research data storage service
  *
- * This file is licensed under the Affero General Public License version 3 or later.
- * See the COPYING-README file.
+ * @author   CSC - IT Center for Science Ltd., Espoo Finland <servicedesk@csc.fi>
+ * @link     https://research.csc.fi/
  */
 
+/* Copyright (c) 2011, Jan-Christoph Borchardt, http://jancborchardt.net
+ This file is licensed under the Affero General Public License version 3 or later.
+ See the COPYING-README file. */
+
+/* SETTINGS */
+#files-setting-showhidden {
+	padding-bottom: 8px;
+}
+
 /* FILE MENU */
 .actions {
 	padding: 5px;
@@ -16,11 +24,9 @@
 .actions input, .actions button, .actions .button { margin:0; float:left; }
 .actions .button a { color: #555; }
 .actions .button a:hover,
-.actions .button a:focus {
-	background-color: var(--color-background-hover);
-}
+.actions .button a:focus,
 .actions .button a:active {
-	background-color: var(--color-primary-light);
+	color: #333;
 }
 
 .actions.creatable {
@@ -56,61 +62,27 @@
 	position: relative;
 	width: 100%;
 	min-width: 250px;
-	display: block;
-	flex-direction: column;
 	// hide table if emptycontent is not hidden
 	#emptycontent:not(.hidden) ~ & {
 		display: none;
 	}
-	// floating header
-	thead {
-		position: -webkit-sticky;
-		position: sticky;
-		@include position('sticky');
-		// header + breadcrumbs
-		top: $header-height;
-		// under breadcrumbs, over file list
-		z-index: 60;
-		display: block;
-		background-color: var(--color-main-background-translucent);
-	}
-
-	/**
-	 * This is a dirty hack as the sticky header requires us to use a different display type on the table element
-	 */
-	tbody {
-		display: table;
-		width: 100%;
-
-		tr[data-permissions="0"],
-		tr[data-permissions="16"] {
-			background-color: var(--color-background-dark);
-
-			td.filename .nametext .innernametext {
-				color: var(--color-text-maxcontrast);
-			}
-		}
-	}
-}
-
-#filestable.hidden {
-	display: none;
 }
 
 /* fit app list view heights */
 .app-files #app-content > .viewcontainer {
 	min-height: 0%;
-	width: 100%;
 }
 
 .app-files #app-content {
+	transition: background-color 0.3s ease;
 	// force  the width to be the full width to not go bigger than the screen
 	// flex will grow for the mobile view if necessary
 	width: calc(100% - 300px);
 }
 
 .file-drag, .file-drag #filestable tbody tr, .file-drag #filestable tbody tr:hover {
-	background-color: var(--color-primary-light) !important;
+	transition: background-color 0.3s ease!important;
+	background-color: rgb(179, 230, 255) !important;
 }
 
 .app-files #app-content.dir-drop {
@@ -122,7 +94,7 @@
 }
 
 .app-files #app-content.dir-drop #filestable tbody tr.dropping-to-dir{
-	background-color: var(--color-primary-light) !important;
+	background-color: rgb(179, 230, 255) !important;
 }
 
 /* icons for sidebar */
@@ -137,7 +109,6 @@
 }
 .nav-icon-sharingin,
 .nav-icon-sharingout,
-.nav-icon-pendingshares,
 .nav-icon-shareoverview {
 	@include icon-color('share', 'files', $color-black);
 }
@@ -181,23 +152,22 @@
 }
 
 #filestable tbody tr {
+	transition: background-color 0.3s ease;
 	height: 51px;
 }
 #filestable tbody tr:hover,
 #filestable tbody tr:focus,
 #filestable tbody .name:focus,
-#filestable tbody tr:hover .filename form,
-table tr.mouseOver td {
-	background-color: var(--color-background-hover);
-}
 #filestable tbody tr:active,
 #filestable tbody tr.highlighted,
 #filestable tbody tr.highlighted .name:focus,
 #filestable tbody tr.selected,
-#filestable tbody tr.searchresult {
-	background-color: var(--color-primary-light);
+#filestable tbody tr.searchresult,
+#filestable tbody tr:hover .filename form,
+table tr.mouseOver td {
+	transition: background-color 0.2s ease;
+    background-color: #e5f2f7;
 }
-
 tbody a { color: var(--color-main-text); }
 
 span.conflict-path, span.extension, span.uploading, td.date {
@@ -298,25 +268,20 @@
 	max-width: 130px;
 }
 
-#app-content-files thead,
-#app-content-trashbin thead {
+/* Multiselect bar */
+table.multiselect thead {
+	@include position('sticky');
 	top: 94px;
-}
-
-#app-content-recent, 
-#app-content-favorites, 
-#app-content-shareoverview, 
-#app-content-sharingout,
-#app-content-sharingin,
-#app-content-sharinglinks,
-#app-content-deletedshares,
-#app-content-pendingshares {
-	margin-top: 22px;
+	z-index: 55;
+	-moz-box-sizing: border-box;
+	box-sizing: border-box;
+	left: $navigation-width;
 }
 
 table.multiselect thead th {
 	background-color: var(--color-main-background-translucent);
 	font-weight: bold;
+	border-bottom: 0;
 }
 
 #app-content.with-app-sidebar table.multiselect thead{
@@ -337,8 +302,7 @@
 	width: 32px;
 	text-align: center;
 }
-table td.filename a.name,
-table td.filename p.name {
+table td.filename a.name {
 	display: flex;
 	position:relative; /* Firefox needs to explicitly have this default set … */
 	-moz-box-sizing: border-box;
@@ -374,9 +338,6 @@
 	position: absolute;
 	z-index: 4;
 }
-table td.filename p.name .thumbnail {
-	cursor: default;
-}
 
 // Show slight border around previews for images, txt, etc.
 table tr[data-has-preview='true'] .thumbnail {
@@ -412,12 +373,13 @@
 			width: 0;
 			flex-grow: 1;
 			display: flex;
+			padding: 0;
 			overflow: hidden;
 			white-space: nowrap;
 			text-overflow: ellipsis;
 			height: 100%;
 			z-index: 10;
-			padding: 0 20px 0 0;
+			padding-right: 20px;
 		}
 	}
 
@@ -467,8 +429,8 @@
 
 /* File checkboxes */
 #fileList tr td.selection>.selectCheckBox + label:before {
-	opacity: 0.3;
-	margin-right: 0;
+	/* opacity: 0.3; */
+	opacity: 1; /* opacity of 0.3 was too light for Accessibility requirements */
 }
 
 /* Show checkbox with full opacity when hovering, checked, or selected */
@@ -485,18 +447,11 @@
 }
 
 /* Use label to have bigger clickable size for checkbox */
-#fileList tr td.selection>.selectCheckBox,
-.select-all {
-	& + label {
+#fileList tr td.selection>.selectCheckBox + label,
+.select-all + label {
 		padding: 16px;
 	}
 
-	&:focus + label {
-		background-color: var(--color-background-hover);
-		border-radius: var(--border-radius-pill);
-	}
-}
-
 #fileList tr td.filename {
 	position: relative;
 	width: 100%;
@@ -505,8 +460,7 @@
 	-webkit-transition:background-image 500ms; -moz-transition:background-image 500ms; -o-transition:background-image 500ms; transition:background-image 500ms;
 }
 
-#fileList tr td.filename a.name label,
-#fileList tr td.filename p.name label {
+#fileList tr td.filename a.name label {
 	position: absolute;
 	width: 80%;
 	height: 50px;
@@ -553,23 +507,6 @@
 	cursor: default !important;
 }
 
-/*
- * Make the disabled link look not like a link in file list rows
- */
-#fileList a.name.disabled {
-	* {
-		cursor: default;
-	}
-
-	a, a * {
-		cursor: pointer;
-	}
-
-	&:focus {
-		background: none;
-	}
-}
-
 a.action > img {
 	height: 16px;
 	width: 16px;
@@ -609,7 +546,7 @@
 		display: inline;
 		padding: 17px 8px;
 		line-height: 50px;
-		opacity: .3;
+		opacity: 1;
 		&.action-share {
 			padding: 17px 14px;
 			&.permanent:not(.shared-style) .icon-shared + span {
@@ -635,33 +572,26 @@
 		}
 		&.no-permission {
 			&:hover, &:focus {
-				opacity: .3;
+				opacity: 1;
 			}
 		}
 		&.disabled {
 			&:hover, &:focus,
 			img {
-				opacity: .3;
+				opacity: 1;
 			}
 			&.action-download {
-				opacity: .7;
+				opacity: 1;
 				&:hover, &:focus {
-					opacity: .7;
+					opacity: 1;
 				}
 			}
 		}
 		&:hover, &:focus {
 			opacity: 1;
 		}
-		&:focus {
-			background-color: var(--color-background-hover);
-			border-radius: var(--border-radius-pill);
-		}
 	}
 	.fileActionsMenu a.action, a.action.action-share.shared-style {
-		opacity: .7;
-	}
-	.fileActionsMenu .action.permanent {
 		opacity: 1;
 	}
 }
@@ -706,15 +636,10 @@
 }
 
 .summary {
-	color: var(--color-text-maxcontrast);
+	/* opacity: .3; */
+	opacity: 1;  /* .3 is too light for Accessibility requirements */
 	/* add whitespace to bottom of files list to correctly show dropdowns */
-	$action-menu-items-count: 7; // list view has currently max 7 items in its action menu 
-	height: 44px * ($action-menu-items-count + 0.5); // 0.5 is added to show some whitespace below
-}
-#filestable .filesummary {
-	width: 100%;
-	/* Width of checkbox and file preview */
-	padding-left: 101px;
+	height: 250px;
 }
 /* Less whitespace needed on link share page
  * as there is a footer and action menus have fewer entries.
@@ -733,11 +658,8 @@
 	vertical-align: top;
 	padding-top: 20px;
 }
-.summary td:first-child {
-	padding: 0;
-}
-.hiddeninfo {
-	white-space: pre-line;
+.summary .info {
+	margin-left: 35px; /* td has padding of 15, col width is 50 */
 }
 
 table.dragshadow {
@@ -779,14 +701,15 @@
 .newFileMenu {
 	font-weight: 300;
 	top: 100%;
-	left: -48px !important;
 	margin-top: 4px;
 	min-width: 100px;
+	margin-left: 22px; /* Align left edge below center of + button … */
+	transform: translateX(-50%); /* … then center it below button */
 	z-index: 1001;
 
 	/* Center triangle */
 	&::after {
-		left: 57px !important;
+		left: calc(50% - 8px) !important;
 	}
 }
 
@@ -838,25 +761,6 @@
 	}
 }
 
-.notCreatable {
-	margin-left: 12px;
-	margin-right: 44px;
-	margin-top: 12px;
-	color: var(--color-main-text);
-	overflow: auto;
-	min-width: 160px;
-	height: 54px;
-	
-	&:not(.hidden) {
-		display: flex;
-	}
-
-	.icon-alert-outline {
-		top: -15px;
-		position: relative;
-		margin-right: 4px;
-	}
-}
 
 #quota {
 	margin: 0 !important;
@@ -933,7 +837,8 @@
 				.thumbnail-wrapper,
 				.nametext,
 				.fileactions {
-					background-color: var(--color-background-hover);
+					transition: background-color 0.3s ease;
+					background-color: var(--color-background-dark);
 				}
 			}
 		}
@@ -1131,8 +1036,6 @@
 		.summary:not(.hidden) {
 			display: inline-block;
 			margin: 0 auto;
-			$action-menu-items-count: 9; // grid view has currently max 9 items in its action menu
-			height: 44px * ($action-menu-items-count + 0.5); // 0.5 is added to show some whitespace below
 
 			td {
 				padding-top: 50px;
@@ -1167,15 +1070,9 @@
 		opacity: 1;
 	}
 }
-
-/**
- * Make sure the hidden input is always
- * on the visible scrolled area of the
- * page to avoid scrolling to top when focusing
- */
+/* Make sure the hidden input is not rendered at all to avoid scrolling to top */
 #showgridview {
-	position: fixed;
-	top: 0;
+	display: none;
 }
 
 /* Adjustments for link share page */
