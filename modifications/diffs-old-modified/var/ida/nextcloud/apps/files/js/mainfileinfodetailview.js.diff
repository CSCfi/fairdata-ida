--- /var/ida/nextcloud-old/apps/files/js/mainfileinfodetailview.js	2021-10-27 10:25:30.398495093 +0000
+++ /var/ida/nextcloud-old/apps/files/js/mainfileinfodetailview.js.original	2021-10-27 10:25:30.398495093 +0000
@@ -1,11 +1,4 @@
 /*
- * This file is part of the IDA research data storage service
- *
- * @author   CSC - IT Center for Science Ltd., Espoo Finland <servicedesk@csc.fi>
- * @link     https://research.csc.fi/
- */
-
-/*
  * Copyright (c) 2015
  *
  * This file is licensed under the Affero General Public License version 3
@@ -50,8 +43,8 @@
 		events: {
 			'click a.action-favorite': '_onClickFavorite',
 			'click a.action-default': '_onClickDefaultAction',
-			//'click a.permalink': '_onClickPermalink',
-			//'focus .permalink-field>input': '_onFocusPermalink'
+			'click a.permalink': '_onClickPermalink',
+			'focus .permalink-field>input': '_onFocusPermalink'
 		},
 
 		template: function(data) {
@@ -74,7 +67,6 @@
 		},
 
 		_setupClipboard: function() {
-            return;
 			var clipboard = new Clipboard('.permalink');
 			clipboard.on('success', function(e) {
 				var $el = $(e.trigger);
@@ -99,12 +91,11 @@
 		},
 
 		_onClickPermalink: function(e) {
-			//e.preventDefault();
+			e.preventDefault();
 			return;
 		},
 
 		_onFocusPermalink: function() {
-            return;
 			this.$('.permalink-field>input').select();
 		},
 
@@ -183,8 +174,8 @@
 					hasFavoriteAction: hasFavoriteAction,
 					starAltText: isFavorite ? t('files', 'Favorited') : t('files', 'Favorite'),
 					starClass: isFavorite ? 'icon-starred' : 'icon-star',
-					//permalink: this._makePermalink(this.model.get('id')),
-					//permalinkTitle: t('files', 'Copy direct link (only works for users who have access to this file/folder)')
+					permalink: this._makePermalink(this.model.get('id')),
+					permalinkTitle: t('files', 'Copy direct link (only works for users who have access to this file/folder)')
 				}));
 
 				// TODO: we really need OC.Previews
