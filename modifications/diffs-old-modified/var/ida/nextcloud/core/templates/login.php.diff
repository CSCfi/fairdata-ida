1c1,3
< <?php /** @var $l \OCP\IL10N */ ?>
---
> <?php
> 
> /** @var $l \OCP\IL10N */ ?>
5a8,10
> 
> $CURRENT_LANGUAGE = $l->getLanguageCode();
> $CURRENT_LANGUAGE = $CURRENT_LANGUAGE ? substr($CURRENT_LANGUAGE, 0, 2) : 'en';
11,14c16,19
< 	<?php if (!empty($_['redirect_url'])) {
< 		print_unescaped('<input type="hidden" name="redirect_url" value="' . \OCP\Util::sanitizeHTML($_['redirect_url']) . '">');
< 	} ?>
< 		<?php if (isset($_['apacheauthfailed']) && $_['apacheauthfailed']): ?>
---
> 		<?php if (!empty($_['redirect_url'])) {
> 			print_unescaped('<input type="hidden" name="redirect_url" value="' . \OCP\Util::sanitizeHTML($_['redirect_url']) . '">');
> 		} ?>
> 		<?php if (isset($_['apacheauthfailed']) && $_['apacheauthfailed']) : ?>
20c25
< 		<?php foreach($_['messages'] as $message): ?>
---
> 		<?php foreach ($_['messages'] as $message) : ?>
25c30
< 		<?php if (isset($_['internalexception']) && $_['internalexception']): ?>
---
> 		<?php if (isset($_['internalexception']) && $_['internalexception']) : ?>
32,33c37
< 			<img class="float-spinner" alt=""
< 				src="<?php p(image_path('core', 'loading-dark.gif'));?>">
---
> 			<img class="float-spinner" alt="" src="<?php p(image_path('core', 'loading-dark.gif')); ?>">
38,46d41
< 		<p class="grouptop<?php if (!empty($_[LoginController::LOGIN_MSG_INVALIDPASSWORD])) { ?> shake<?php } ?>">
< 			<input type="text" name="user" id="user"
< 				placeholder="<?php p($l->t('Username or email')); ?>"
< 				aria-label="<?php p($l->t('Username or email')); ?>"
< 				value="<?php p($_['loginName']); ?>"
< 				<?php p($_['user_autofocus'] ? 'autofocus' : ''); ?>
< 				autocomplete="<?php p($_['login_form_autocomplete']); ?>" autocapitalize="none" autocorrect="off" required>
< 			<label for="user" class="infield"><?php p($l->t('Username or email')); ?></label>
< 		</p>
48,54c43,49
< 		<p class="groupbottom<?php if (!empty($_[LoginController::LOGIN_MSG_INVALIDPASSWORD])) { ?> shake<?php } ?>">
< 			<input type="password" name="password" id="password" value=""
< 				placeholder="<?php p($l->t('Password')); ?>"
< 				aria-label="<?php p($l->t('Password')); ?>"
< 				<?php p($_['user_autofocus'] ? '' : 'autofocus'); ?>
< 				autocomplete="<?php p($_['login_form_autocomplete']); ?>" autocapitalize="none" autocorrect="off" required>
< 			<label for="password" class="infield"><?php p($l->t('Password')); ?></label>
---
> 		<p class="login-field<?php if (!empty($_[LoginController::LOGIN_MSG_INVALIDPASSWORD])) { ?> shake<?php } ?>">
> 			<input type="text" name="user" id="user" placeholder="Username" value="<?php p($_['loginName']); ?>" <?php p($_['user_autofocus'] ? 'autofocus' : ''); ?> autocomplete="<?php p($_['login_form_autocomplete']); ?>" autocapitalize="none" autocorrect="off" required>
> 			<label for="user" class="infield">Username</label>
> 		</p>
> 		<p class="login-field<?php if (!empty($_[LoginController::LOGIN_MSG_INVALIDPASSWORD])) { ?> shake<?php } ?>">
> 			<input type="password" name="password" id="password" value="" placeholder="Password" <?php p($_['user_autofocus'] ? '' : 'autofocus'); ?> autocomplete="<?php p($_['login_form_autocomplete']); ?>" autocapitalize="none" autocorrect="off" required>
> 			<label for="password" class="infield">Password</label>
56d50
< 
58c52
< 			<input type="submit" id="submit" class="login primary" title="" value="<?php p($l->t('Log in')); ?>" disabled="disabled" />
---
> 			<input type="submit" id="submit" class="login primary" title="" value="Login" disabled="disabled" />
79,82c73,76
< 		<div id="reset-password-wrapper" style="display: none;">
< 			<input type="submit" id="reset-password-submit" class="login primary" title="" value="<?php p($l->t('Reset password')); ?>" disabled="disabled" />
< 			<div class="submit-icon icon-confirm-white"></div>
< 		</div>
---
> 			<div id="reset-password-wrapper" style="display: none;">
> 				<input type="submit" id="reset-password-submit" class="login primary" title="" value="<?php p($l->t('Reset password')); ?>" disabled="disabled" />
> 				<div class="submit-icon icon-confirm-white"></div>
> 			</div>
85a80
> 			<!--
95a91
> 		-->
98,99c94,95
< 		<input type="hidden" name="timezone_offset" id="timezone_offset"/>
< 		<input type="hidden" name="timezone" id="timezone"/>
---
> 		<input type="hidden" name="timezone_offset" id="timezone_offset" />
> 		<input type="hidden" name="timezone" id="timezone" />
104,112c100,108
< <form id="alternative-logins">
< 	<fieldset>
< 		<ul>
< 			<?php foreach($_['alt_login'] as $login): ?>
< 				<li><a class="button" href="<?php print_unescaped($login['href']); ?>" ><?php p($login['name']); ?></a></li>
< 			<?php endforeach; ?>
< 		</ul>
< 	</fieldset>
< </form>
---
> 	<form id="alternative-logins">
> 		<fieldset>
> 			<ul>
> 				<?php foreach ($_['alt_login'] as $login) : ?>
> 					<li><a class="button" href="<?php print_unescaped($login['href']); ?>"><?php p($login['name']); ?></a></li>
> 				<?php endforeach; ?>
> 			</ul>
> 		</fieldset>
> 	</form>
