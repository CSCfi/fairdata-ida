--- /var/ida/nextcloud-new/apps/files/js/fileactionsmenu.js	2021-10-27 15:54:06.722752012 +0000
+++ /var/ida/nextcloud-old/apps/files/js/fileactionsmenu.js.original	2021-10-27 10:25:30.395495085 +0000
@@ -77,7 +77,11 @@
 				fileActions.getCurrentPermissions()
 			);
 
-			var defaultAction = fileActions.getCurrentDefaultFileAction();
+			var defaultAction = fileActions.getDefaultFileAction(
+				fileActions.getCurrentMimeType(),
+				fileActions.getCurrentType(),
+				fileActions.getCurrentPermissions()
+			);
 
 			var items = _.filter(actions, function(actionSpec) {
 				return !defaultAction || actionSpec.name !== defaultAction.name;
