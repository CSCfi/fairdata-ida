0a1,3
> <?php
> script(\OCA\Files\AppInfo\Application::APP_ID, 'dist/files-app-settings');
> ?>
12,31c15,31
< 		<li id="quota"
< 			class="pinned <?php p($pinned === 0 ? 'first-pinned ' : '') ?><?php
< 			if ($_['quota'] !== \OCP\Files\FileInfo::SPACE_UNLIMITED) {
< 			?>has-tooltip" title="<?php p($_['usage_relative'] . '%, ');
< 			p($l->t('%s of %s used', [$_['usage'], $_['total_space']]));
< 		} ?>">
< 			<a href="#" class="icon-quota svg">
< 				<p id="quotatext"><?php
< 					if ($_['quota'] !== \OCP\Files\FileInfo::SPACE_UNLIMITED) {
< 						p($l->t('%1$s%% of %2$s used', [round($_['usage_relative'], 1), $_['total_space']]));
< 					} else {
< 						p($l->t('%s used', [$_['usage']]));
< 					} ?></p>
< 				<div class="quota-container">
< 					<progress value="<?php p($_['usage_relative']); ?>"
< 							  max="100"
< 						<?php if ($_['usage_relative'] > 80): ?> class="warn" <?php endif; ?>></progress>
< 				</div>
< 			</a>
< 		</li>
---
> 		<?php if ($_['quota'] === \OCP\Files\FileInfo::SPACE_UNLIMITED): ?>
> 			<li id="quota" class="pinned <?php p($pinned === 0 ? 'first-pinned ' : '') ?>">
> 				<a href="#" class="icon-quota svg">
> 					<p><?php p($l->t('%s used', [$_['usage']])); ?></p>
> 				</a>
> 			</li>
> 		<?php else: ?>
> 			<li id="quota" class="has-tooltip pinned <?php p($pinned === 0 ? 'first-pinned ' : '') ?>"
> 				title="<?php p($l->t('%s%% of %s used', [$_['usage_relative'], $_['total_space']])); ?>">
> 				<a href="#" class="icon-quota svg">
> 					<p id="quotatext"><?php p($l->t('%1$s of %2$s used', [$_['usage'], $_['total_space']])); ?></p>
> 					<div class="quota-container">
> 						<progress value="<?php p($_['usage_relative']); ?>" max="100" class="<?= ($_['usage_relative'] > 80) ? 'warn' : '' ?>"></progress>
> 					</div>
> 				</a>
> 			</li>
> 		<?php endif; ?>
40a41
> 			<div id="files-app-settings"></div>
45a47,51
> 			<div id="files-setting-cropimagepreviews">
> 				<input class="checkbox" id="cropimagepreviewsToggle"
> 					   checked="checked" type="checkbox">
> 				<label for="cropimagepreviewsToggle"><?php p($l->t('Crop image previews')); ?></label>
> 			</div>
48,49c54,55
< 				   value="<?php p(\OCP\Util::linkToRemote('webdav')); ?>"/>
< 			<em><?php print_unescaped($l->t('Use this address to <a href="%s" target="_blank" rel="noreferrer noopener">access your Files via WebDAV</a>', array(link_to_docs('user-webdav')))); ?></em>
---
> 				   value="<?php p($_['webdav_url']); ?>"/>
> 			<em><a href="<?php echo link_to_docs('user-webdav') ?>" target="_blank" rel="noreferrer noopener"><?php p($l->t('Use this address to access your Files via WebDAV')) ?> â†—</a></em>
68,69c74
< 	strpos($item['classes'] ?? '', 'pinned') !== false ? $pinned++ : '';
< 	?>
---
> 	strpos($item['classes'] ?? '', 'pinned') !== false ? $pinned++ : ''; ?>
76c81,83
< 		<?php if (isset($item['classes'])) { p($item['classes']); } ?>
---
> 		<?php if (isset($item['classes'])) {
> 		p($item['classes']);
> 	} ?>
87,89c94,99
< 		if (isset($item['sublist'])) {
< 			?>
< 			<button class="collapse app-navigation-noclose" <?php if (sizeof($item['sublist']) == 0) { ?> style="display: none" <?php } ?>></button>
---
> 	if (isset($item['sublist'])) {
> 		?>
> 			<button class="collapse app-navigation-noclose"
> 				aria-label="<?php p($l->t('Toggle %1$s sublist', $item['name'])) ?>"
> 				<?php if (sizeof($item['sublist']) == 0) { ?> style="display: none" <?php } ?>>
> 			</button>
94,95c104
< 				}
< 				?>
---
> 				} ?>
97c106,107
< 		<?php } ?>
---
> 		<?php
> 	} ?>
129c139,140
< 	<?php }
---
> 	<?php
> 	}
