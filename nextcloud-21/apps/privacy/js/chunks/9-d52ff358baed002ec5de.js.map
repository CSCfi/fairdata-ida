{"version":3,"sources":["webpack:///./src/components/Shares.vue?d470","webpack:///src/components/Shares.vue","webpack:///./src/components/Shares.vue?9272","webpack:///./src/components/Shares.vue"],"names":["component","_vm","this","_h","$createElement","_c","_self","staticClass","class","hidden","isLoading","_v","isEmptyList","_s","$t","_l","uid","key","attrs","uidDisplaynameMap"],"mappings":"iGAAA,I,uLC6CA,IC7CsL,ED6CtL,CACA,cACA,YACA,O,OAAA,GAEA,KALA,WAMA,OACA,mBACA,qBACA,eAGA,UAMA,YANA,WAOA,6DAOA,QA1BA,WA0BA,I,EAAA,c,EAAA,qIACA,iGACA,iCAFA,kBAKA,WALA,cAMA,mCACA,oBAIA,qBACA,QACA,8CACA,qCACA,8EAfA,gDAwBA,oBACA,uDAzBA,yBA2BA,eA3BA,2E,4LEhEIA,EAAY,YACd,GHRW,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,OAAO,CAACE,YAAY,oBAAoBC,MAAM,CAACC,QAASR,EAAIS,aAAaT,EAAIU,GAAG,KAAKN,EAAG,OAAO,CAACG,MAAM,CAACC,QAASR,EAAIW,cAAc,CAACX,EAAIU,GAAG,SAASV,EAAIY,GAAGZ,EAAIa,GAAG,UAAW,qDAAsD,UAAUb,EAAIU,GAAG,KAAKV,EAAIc,GAAId,EAAmB,iBAAE,SAASe,GAAK,OAAOX,EAAG,SAAS,CAACY,IAAID,EAAIE,MAAM,CAAC,KAAOF,EAAI,eAAef,EAAIkB,kBAAkBH,GAAK,KAAO,GAAG,oBAAmB,SAAY,KAC1hB,IGUpB,EACA,KACA,KACA,MAIa,UAAAhB,E","file":"chunks/9-d52ff358baed002ec5de.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"who-has-access\"},[_c('span',{staticClass:\"icon icon-loading\",class:{hidden: !_vm.isLoading}}),_vm._v(\" \"),_c('span',{class:{hidden: !_vm.isEmptyList}},[_vm._v(\"\\n\\t\\t\"+_vm._s(_vm.$t('privacy', 'You don\\'t have any shares with individual users.'))+\"\\n\\t\")]),_vm._v(\" \"),_vm._l((_vm.uniqueShareUIDs),function(uid){return _c('Avatar',{key:uid,attrs:{\"user\":uid,\"display-name\":_vm.uidDisplaynameMap[uid],\"size\":64,\"show-user-status\":false}})})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - @copyright Copyright (c) 2019 Georg Ehrke <oc.list@georgehrke.com>\n  - @author Georg Ehrke <oc.list@georgehrke.com>\n  -\n  - @license GNU AGPL version 3 or any later version\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  -->\n\n<template>\n\t<div class=\"who-has-access\">\n\t\t<span :class=\"{hidden: !isLoading}\" class=\"icon icon-loading\" />\n\t\t<span :class=\"{hidden: !isEmptyList}\">\n\t\t\t{{ $t('privacy', 'You don\\'t have any shares with individual users.') }}\n\t\t</span>\n\t\t<Avatar v-for=\"uid in uniqueShareUIDs\"\n\t\t\t:key=\"uid\"\n\t\t\t:user=\"uid\"\n\t\t\t:display-name=\"uidDisplaynameMap[uid]\"\n\t\t\t:size=\"64\"\n\t\t\t:show-user-status=\"false\" />\n\t</div>\n</template>\n\n<script>\nimport Vue from 'vue'\n\nimport HttpClient from '@nextcloud/axios'\nimport { generateOcsUrl } from '@nextcloud/router'\nimport { getCurrentUser } from '@nextcloud/auth'\nimport { showError } from '@nextcloud/dialogs'\nimport Avatar from '@nextcloud/vue/dist/Components/Avatar'\n\nexport default {\n\tname: 'Shares',\n\tcomponents: {\n\t\tAvatar,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuniqueShareUIDs: [],\n\t\t\tuidDisplaynameMap: {},\n\t\t\tisLoading: true,\n\t\t}\n\t},\n\tcomputed: {\n\t\t/**\n\t\t * Checks if the list of shares is empty\n\t\t *\n\t\t * @returns {boolean}\n\t\t */\n\t\tisEmptyList() {\n\t\t\treturn this.isLoading === false && this.uniqueShareUIDs.length === 0\n\t\t},\n\t},\n\t/**\n\t * This function is called on mount of the Vue component\n\t * It loads the people shared with\n\t */\n\tasync mounted() {\n\t\tconst url = generateOcsUrl('/apps/files_sharing/api/v1/shares?format=json&shared_with_me=false')\n\t\tconst currentUserId = getCurrentUser().uid\n\n\t\ttry {\n\t\t\tconst resp = await HttpClient.get(url)\n\t\t\tresp.data.ocs.data.forEach((d) => {\n\t\t\t\tif (d.share_with === currentUserId) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tswitch (d.share_type) {\n\t\t\t\tcase 0:\n\t\t\t\t\tif (this.uniqueShareUIDs.indexOf(d.share_with) === -1) {\n\t\t\t\t\t\tthis.uniqueShareUIDs.push(d.share_with)\n\t\t\t\t\t\tVue.set(this.uidDisplaynameMap, d.share_with, d.share_with_displayname)\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t})\n\t\t} catch (error) {\n\t\t\tconsole.error(error)\n\t\t\tshowError('Error loading information about shares.')\n\t\t} finally {\n\t\t\tthis.isLoading = false\n\t\t}\n\t},\n}\n</script>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Shares.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Shares.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Shares.vue?vue&type=template&id=7f8ace2b&\"\nimport script from \"./Shares.vue?vue&type=script&lang=js&\"\nexport * from \"./Shares.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}